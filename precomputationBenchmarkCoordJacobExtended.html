<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Precomputation benchmarks (prime fields multiplications)</title>
<script language="JavaScript" type="text/javascript" src="Prime/jsbn.js"></script>
<script language="JavaScript" type="text/javascript"
	src="Prime/jsbn2.js"
></script>
<script language="JavaScript" type="text/javascript"
	src="Binary/BinaryScalar.js"
></script>
<script language="JavaScript" type="text/javascript" src="OEF/OEF.js"></script>
<script language="JavaScript" type="text/javascript"
	src="ECC/eccunique.js"
></script>
<script language="JavaScript" type="text/javascript"
	src="tests/testPrimes.js"
></script>
<script language="JavaScript" type="text/javascript"
	src="tests/testBinary.js"
></script>
<script language="JavaScript" type="text/javascript"
	src="tests/testOEF.js"
></script>
<script language="JavaScript" type="text/javascript"
	src="tests/testECCP2011.js"
></script>
<script language="JavaScript" type="text/javascript"
	src="tests/testECCOEF.js"
></script>
<script language="JavaScript" type="text/javascript">
<!--
	function init() {
		// Do nothing for now
		return;
	}

	function do_test_precomputationLive() {
		
		var j, start, stop, winsize, duree, points_number, tmp, live, hard;
		
		// Lecture des nombres à tester
		points_number = document.precomputingTest.pts.value.split(",");
		
		// Cosmétique: remplissage de la 1ere colonne
		for (i in points_number) {
			j = parseInt(i) + 1;
			document.getElementById("l" + j + "title").childNodes[0].nodeValue = points_number[i];
		}
		
		// Lancement du test
		start = new Date().getTime();
		
		// Test pour chaque nombre de points
		for (j = 1; j <= 5; j++) {
			tmp = "";
			
			// Test pour chaque taille de fenêtre

		for (winsize = 8; winsize < 16; winsize++) {
				
				// Test du précalcul en live en jacobienne
				live = testpointmultprime2Jacob(points_number[j - 1], winsize);
				tmp = "" + live;
			
				// Mise à jour des valeurs dans le tableau
				document.getElementById("l" + j + "w" + winsize).childNodes[0].nodeValue = tmp;
			}
		}
		stop = new Date().getTime();
		duree = (stop - start) / 1000;
		
		document.getElementById("test_time").childNodes[0].nodeValue = duree
				+ " secondes";
		return;
	}
</script>
</head>
<body onLoad='init();'>
	<h1>Precomputation benchmarks (prime fields multiplications)</h1>
	Precomputing in jacobian - extended test (bigger window sizes)
	<form name="precomputingTest" onSubmit='return false;'>
		<input type="button" value="Benchmark it!"
			onClick="do_test_precomputationLive();"
		>
		<p>
			Number of points = <input name="pts" type="text"
				value="10,30,50,70,90" size=25
			>
		</p>
		<table border="1" caption="Average time for one multiplication">
			<thead>
				<tr>
					<th>Nbr of mults \ Window size</th>
					<th>8</th>
					<th>9</th>
					<th>10</th>
					<th>11</th>
					<th>12</th>
					<th>13</th>
					<th>14</th>
					<th>15</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td id="l1title">&nbsp;</td>
					<!-- le &nbsp; permet d'afficher correctement la ligne du 
					tableau, sinon il croit que toute la ligne est vide et 
					n'affiche rien de bien -->
					<td id="l1w8">&nbsp;</td>
					<td id="l1w9">&nbsp;</td>
					<td id="l1w10">&nbsp;</td>
					<td id="l1w11">&nbsp;</td>
					<td id="l1w12">&nbsp;</td>
					<td id="l1w13">&nbsp;</td>
					<td id="l1w14">&nbsp;</td>
					<td id="l1w15">&nbsp;</td>
				</tr>
				<tr>
					<td id="l2title">&nbsp;</td>
					<td id="l2w8">&nbsp;</td>
					<td id="l2w9">&nbsp;</td>
					<td id="l2w10">&nbsp;</td>
					<td id="l2w11">&nbsp;</td>
					<td id="l2w12">&nbsp;</td>
					<td id="l2w13">&nbsp;</td>
					<td id="l2w14">&nbsp;</td>
					<td id="l2w15">&nbsp;</td>
				</tr>
				<tr>
					<td id="l3title">&nbsp;</td>
					<td id="l3w8">&nbsp;</td>
					<td id="l3w9">&nbsp;</td>
					<td id="l3w10">&nbsp;</td>
					<td id="l3w11">&nbsp;</td>
					<td id="l3w12">&nbsp;</td>
					<td id="l3w13">&nbsp;</td>
					<td id="l3w14">&nbsp;</td>
					<td id="l3w15">&nbsp;</td>
				</tr>
				<tr>
					<td id="l4title">&nbsp;</td>
					<td id="l4w8">&nbsp;</td>
					<td id="l4w9">&nbsp;</td>
					<td id="l4w10">&nbsp;</td>
					<td id="l4w11">&nbsp;</td>
					<td id="l4w12">&nbsp;</td>
					<td id="l4w13">&nbsp;</td>
					<td id="l4w14">&nbsp;</td>
					<td id="l4w15">&nbsp;</td>
				</tr>
				<tr>
					<td id="l5title">&nbsp;</td>
					<td id="l5w8">&nbsp;</td>
					<td id="l5w9">&nbsp;</td>
					<td id="l5w10">&nbsp;</td>
					<td id="l5w11">&nbsp;</td>
					<td id="l5w12">&nbsp;</td>
					<td id="l5w13">&nbsp;</td>
					<td id="l5w14">&nbsp;</td>
					<td id="l5w15">&nbsp;</td>
				</tr>
			</tbody>
		</table>
		<p>
			<b>Full testing time: <span id="test_time"> </span></b>
		</p>
		<p>NB: Times (in µs) are averages of 10 tests.</p>
	</form>
</body>
</html>
